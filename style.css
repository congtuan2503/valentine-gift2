* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
    background: #222; 
    display: flex; justify-content: center; align-items: center; 
    height: 100vh; overflow: hidden;
    font-family: 'Press Start 2P', cursive;
}

.game-container {
    width: 90vw;
    aspect-ratio: 16 / 9;
    max-width: 1200px;
    position: relative;
    border: 4px solid #fff;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
}

.scene {
    position: absolute; width: 100%; height: 100%;
    transition: opacity 1.5s ease-in-out, filter 1.5s ease;
    display: none;
}
.scene.active { display: block; }

.bg-img { width: 100%; height: 100%; object-fit: cover; image-rendering: pixelated; }

/* Hiệu ứng rung cho hộp quà */
@keyframes shake {
    0% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    30% { transform: translate(3px, 2px) rotate(0deg); }
    50% { transform: translate(-1px, 2px) rotate(1deg); }
    100% { transform: translate(1px, 1px) rotate(0deg); }
}
.shake { animation: shake 0.5s infinite; }

.pixel-art { image-rendering: pixelated; }

/* Vật phẩm trên bàn */
#gift-container {
    position: absolute; bottom: 20%; left: 50%; transform: translateX(-50%);
    cursor: pointer; text-align: center; color: white; font-size: 10px;
}

#items-in-box {
    position: absolute; width: 100%; height: 100%;
    display: flex; justify-content: space-around; align-items: center;
    padding-top: 100px;
}

.interactable {
    position: relative; cursor: pointer; transition: transform 0.2s;
}
.interactable:hover { transform: scale(1.1); }
.interactable:hover::after {
    content: attr(data-text);
    position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
    background: white; color: black; padding: 5px; font-size: 8px; width: max-content;
}

/* Modal Blur */
.modal {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.4); backdrop-filter: blur(8px);
    z-index: 100; display: flex; justify-content: center; align-items: center;
}
.hidden { display: none !important; }

.content-piece img { max-height: 70vh; border: 5px solid white; }
.cassette-spinning img { animation: rotate 2s linear infinite; }
@keyframes rotate { from {transform: rotate(0deg);} to {transform: rotate(360deg);} }

#start-btn {
    padding: 15px 30px; font-family: 'Press Start 2P'; cursor: pointer;
    background: #ff4d6d; color: white; border: none; border-radius: 5px;
}